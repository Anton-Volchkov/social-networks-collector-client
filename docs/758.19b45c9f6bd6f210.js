"use strict";(self.webpackChunkSNC=self.webpackChunkSNC||[]).push([[758],{8758:(Mt,y,a)=>{a.r(y),a.d(y,{MainModule:()=>Ot});var h=a(9808),D=a(654),b=a(6696),L=a(4694),t=a(5e3),l=a(2722),u=a(8966),v=a(7423),g=a(4218);let x=(()=>{class o{constructor(e,i){this.dialogRef=e,this.data=i}ngOnInit(){}close(){this.dialogRef.close(!1)}confirm(){this.dialogRef.close(!0)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.so),t.Y36(u.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-confirm-dialog"]],decls:12,vars:8,consts:[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content",1),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.qZA(),t.TgZ(5,"mat-dialog-actions",2),t.TgZ(6,"button",3),t.NdJ("click",function(){return i.confirm()}),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(){return i.close()}),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(i.data.dialogTitle),t.xp6(3),t.Oqu(i.data.confirmationText),t.xp6(3),t.Oqu(t.lcZ(8,4,"ACTIONS.CONFIRM")),t.xp6(3),t.Oqu(t.lcZ(11,6,"ACTIONS.CLOSE")))},directives:[u.uh,u.xY,u.H8,v.lW],pipes:[g.X$],styles:[""]}),o})();var O=a(3411),G=a(9292);let F=(()=>{class o extends O.V{constructor(e,i,s){super(),this.router=e,this.dialog=i,this.translate=s,this.isCollapsed=!0}ngOnInit(){}logout(){this.dialog.open(x,{disableClose:!0,autoFocus:!1,minWidth:"25vw",data:{dialogTitle:this.translate.instant("MODALS.CONFIRM.TITLE"),confirmationText:this.translate.instant("MODALS.CONFIRM.LOGOUT")}}).afterClosed().pipe((0,l.R)(this.unsubscribe)).subscribe(e=>{e&&(localStorage.removeItem("access_token"),this.router.navigateByUrl("/login"))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.F0),t.Y36(u.uw),t.Y36(g.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-header"]],features:[t.qOj],decls:27,vars:5,consts:[[1,"navbar","navbar-inverse","navbar-fixed-top","navbar-expand-lg","navbar-dark","bg-dark","p-2"],[1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarTogglerDemo02","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler","btn","btn-outline-primary",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse",3,"ngbCollapse"],[1,"navbar-nav"],[1,"nav-item","active"],["href","#",1,"nav-link"],[1,"sr-only"],[1,"nav-item"],["href","#",1,"nav-link","disabled"],[1,"navbar-nav","ms-auto","mb-2","mb-lg-0"],["type","submit",1,"btn","btn-outline-success",3,"click"],[1,"fa-solid","fa-arrow-right-from-bracket"]],template:function(e,i){1&e&&(t.TgZ(0,"nav",0),t.TgZ(1,"span",1),t._uU(2,"SNC"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return i.isCollapsed=!i.isCollapsed}),t._UZ(4,"span",3),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"ul",5),t.TgZ(7,"li",6),t.TgZ(8,"a",7),t._uU(9,"Home "),t.TgZ(10,"span",8),t._uU(11,"(current)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"li",9),t.TgZ(13,"a",7),t._uU(14,"Features"),t.qZA(),t.qZA(),t.TgZ(15,"li",9),t.TgZ(16,"a",7),t._uU(17,"Pricing"),t.qZA(),t.qZA(),t.TgZ(18,"li",9),t.TgZ(19,"a",10),t._uU(20,"Disabled"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"ul",11),t.TgZ(22,"li"),t.TgZ(23,"button",12),t.NdJ("click",function(){return i.logout()}),t._uU(24),t.ALo(25,"translate"),t._UZ(26,"i",13),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.uIk("aria-expanded",!i.isCollapsed),t.xp6(2),t.Q6J("ngbCollapse",i.isCollapsed),t.xp6(19),t.hij(" ",t.lcZ(25,3,"BUTTONS.LOGOUT")," "))},directives:[G.M2,G._D],pipes:[g.X$],styles:[""]}),o})(),J=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-main-board"]],decls:3,vars:0,consts:[[1,"container"]],template:function(e,i){1&e&&(t._UZ(0,"app-header"),t.TgZ(1,"div",0),t._UZ(2,"router-outlet"),t.qZA())},directives:[F,b.lC],styles:[""]}),o})();var M=a(7579),k=a(3900),Y=a(515),Q=a(262),m=a(3785);let q=(()=>{class o{constructor(){this.currentGroupChanged=new M.x}notifyCurrentGroupChanged(e){this.currentGroupChanged.next(e)}observeCurrentGroupChanged(){return this.currentGroupChanged.asObservable()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var B=a(2313),j=a(5697),r=a(3075),S=a(9878),Z=a(9814),C=a(4376);let w=(()=>{class o{constructor(e,i){this.el=e,this.renderer=i}ngAfterViewInit(){this.addClassesForComponent()}addClassesForComponent(){let e=["fab"];this.networkType==m.td.Telegram&&e.push("fa-telegram","telegram-icon"),this.networkType==m.td.VK&&e.push("fa-vk","vk-icon"),this.networkType==m.td.Twitter&&e.push("fa-twitter","twitter-icon"),e.forEach(i=>{this.renderer.addClass(this.el.nativeElement,i)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq),t.Y36(t.Qsj))},o.\u0275dir=t.lG2({type:o,selectors:[["i","networsItems",""]],inputs:{networkType:"networkType"}}),o})();var T=a(7322),I=a(7531);function H(o,n){if(1&o&&(t.TgZ(0,"span",14),t._uU(1),t.qZA(),t._UZ(2,"i",15)),2&o){const e=n.item;t.xp6(1),t.hij(" ",e.displayChannelName," "),t.xp6(1),t.Q6J("networkType",e.networkType)}}function P(o,n){if(1&o&&(t.TgZ(0,"ng-select",12),t.ALo(1,"translate"),t.YNc(2,H,3,2,"ng-template",13),t.qZA()),2&o){const e=t.oxw();t.ekj("ng-invalid",e.submitted&&(null==e.f.activeSubscription||null==e.f.activeSubscription.errors?null:e.f.activeSubscription.errors.required)),t.Q6J("placeholder",t.lcZ(1,4,"MAIN.SUBSCRIBE.CHANNEL_NAME"))("items",e.activeSubscriptions)}}const R=function(o){return{fieldName:o}};function V(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.xi3(2,1,"VALIDATION.ERRORS.FIELD_REQUIRED",t.VKq(6,R,t.lcZ(3,4,"MAIN.SUBSCRIBE.CHANNEL_NAME")))," "))}function z(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.xi3(2,1,"VALIDATION.ERRORS.FIELD_REQUIRED",t.VKq(6,R,t.lcZ(3,4,"MAIN.SUBSCRIBE.CHANNEL_NAME")))," "))}function $(o,n){if(1&o&&(t.ynx(0),t._UZ(1,"ng-select",16),t.TgZ(2,"mat-form-field",17),t._UZ(3,"input",18),t.ALo(4,"translate"),t.YNc(5,z,4,8,"mat-error",8),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("items",e.networks)("clearable",!1),t.xp6(1),t.ekj("mat-form-field-invalid",e.submitted&&(null==e.f.channelName?null:e.f.channelName.errors)),t.xp6(1),t.Q6J("placeholder",t.lcZ(4,6,"MAIN.SUBSCRIBE.CHANNEL_NAME")),t.xp6(2),t.Q6J("ngIf",e.submitted&&(null==e.f.channelName||null==e.f.channelName.errors?null:e.f.channelName.errors.required))}}var f=(()=>{return(o=f||(f={}))[o.ExistingSubscription=0]="ExistingSubscription",o[o.NewSubscription=1]="NewSubscription",f;var o})();let W=(()=>{class o extends S.x{constructor(e,i,s,c,p,d){super(s,c),this.dialogRef=e,this.data=i,this.subscriptionsGroupService=p,this.subscriptionsService=d,this.networks=Object.values(m.td),this.activeSubscriptions=[],this.subscriptionType=f}ngOnInit(){this.loadActiveSubscriptions(),this.createForm()}saveInternal(){let e=this.detailsForm.getRawValue();this.isActiveSubscriptionsSelected()?this.subscriptionsGroupService.addSubscriptionToSubscriptionsGroup(this.data.groupName,e.activeSubscription).pipe((0,l.R)(this.unsubscribe)).subscribe(()=>{this.confirm()}):this.subscriptionsService.subscribe(e.networkType,e.channelName).pipe((0,k.w)(i=>this.subscriptionsGroupService.addSubscriptionToSubscriptionsGroup(this.data.groupName,i)),(0,l.R)(this.unsubscribe)).subscribe(i=>{this.confirm()})}close(){this.dialogRef.close({isClosed:!0})}confirm(){var e,i;this.dialogRef.close({isClosed:!1,subscriptionType:null===(i=null===(e=this.f)||void 0===e?void 0:e.subscriptionType)||void 0===i?void 0:i.value})}createForm(){this.detailsForm=this.fb.group({subscriptionType:[f.ExistingSubscription,r.kI.required],activeSubscription:[null,r.kI.required],networkType:[{disabled:!0,value:"Telegram"},r.kI.required],channelName:[{disabled:!0,value:null},r.kI.required]}),this.f.subscriptionType.valueChanges.pipe((0,l.R)(this.unsubscribe)).subscribe(e=>{e===f.ExistingSubscription?(this.f.activeSubscription.enable(),this.f.networkType.disable(),this.f.channelName.disable()):(this.f.activeSubscription.disable(),this.f.networkType.enable(),this.f.channelName.enable()),this.detailsForm.updateValueAndValidity()})}isActiveSubscriptionsSelected(){var e,i;return(null===(i=null===(e=this.f)||void 0===e?void 0:e.subscriptionType)||void 0===i?void 0:i.value)===f.ExistingSubscription}loadActiveSubscriptions(){this.subscriptionsGroupService.getValidActiveSubscriptionsForGroup(this.data.groupName).pipe((0,l.R)(this.unsubscribe)).subscribe(e=>{this.activeSubscriptions=null!=e?e:[]})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.so),t.Y36(u.WI),t.Y36(b.gz),t.Y36(r.qu),t.Y36(m.c6),t.Y36(m.do))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-subscription-to-group-dialog"]],features:[t.qOj],decls:23,vars:21,consts:[["mat-dialog-title",""],[1,"mat-typography","row",2,"min-height","11vh"],[1,"mt-3",3,"formGroup"],["formControlName","subscriptionType","aria-label","Select an option",1,"mb-2"],["color","primary",3,"value"],["color","primary",1,"ms-md-3","ms-md-3","mt-md-0","mt-2",3,"value"],[1,"mt-2"],["appendTo","body","bindValue","id","formControlName","activeSubscription","class","col-12 pb-0",3,"ng-invalid","placeholder","items",4,"ngIf"],[4,"ngIf"],["align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],["appendTo","body","bindValue","id","formControlName","activeSubscription",1,"col-12","pb-0",3,"placeholder","items"],["ng-option-tmp","","ng-label-tmp",""],[1,"truncate",2,"max-width","80%"],["networsItems","","aria-hidden","true",1,"ms-1",3,"networkType"],["appendTo","body","formControlName","networkType",1,"col-12","pb-0",3,"items","clearable"],[1,"col-12","mt-3"],["formControlName","channelName","matInput","","required","",3,"placeholder"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"mat-dialog-content",1),t.TgZ(4,"form",2),t.TgZ(5,"mat-radio-group",3),t.TgZ(6,"mat-radio-button",4),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-radio-button",5),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.qZA(),t.TgZ(12,"div",6),t.YNc(13,P,3,6,"ng-select",7),t.YNc(14,V,4,8,"mat-error",8),t.qZA(),t.YNc(15,$,6,8,"ng-container",8),t.qZA(),t.qZA(),t.TgZ(16,"mat-dialog-actions",9),t.TgZ(17,"button",10),t.NdJ("click",function(){return i.save()}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"button",11),t.NdJ("click",function(){return i.close()}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,11,"MODALS.PLEASE_MAKE_A_CHOISE")),t.xp6(3),t.Q6J("formGroup",i.detailsForm),t.xp6(2),t.Q6J("value",i.subscriptionType.ExistingSubscription),t.xp6(1),t.Oqu(t.lcZ(8,13,"MODALS.ADD_SUBSCRIPTION_TO_GROUP.EXISTING_SUBSCRIPTION")),t.xp6(2),t.Q6J("value",i.subscriptionType.NewSubscription),t.xp6(1),t.hij(" ",t.lcZ(11,15,"MODALS.ADD_SUBSCRIPTION_TO_GROUP.NEW_SUBSCRIPTION"),""),t.xp6(3),t.Q6J("ngIf",i.isActiveSubscriptionsSelected()),t.xp6(1),t.Q6J("ngIf",i.submitted&&(null==i.f.activeSubscription||null==i.f.activeSubscription.errors?null:i.f.activeSubscription.errors.required)),t.xp6(1),t.Q6J("ngIf",!i.isActiveSubscriptionsSelected()),t.xp6(3),t.hij(" ",t.lcZ(19,17,"MAIN.SUBSCRIBE.SUBSCRIBE"),""),t.xp6(3),t.Oqu(t.lcZ(22,19,"ACTIONS.CLOSE")))},directives:[u.uh,u.xY,r._Y,r.JL,r.sg,Z.VQ,r.JJ,r.u,Z.U0,h.O5,C.w9,C.ir,C.mR,w,T.TO,T.KE,r.Fj,I.Nt,r.Q7,u.H8,v.lW],pipes:[g.X$],styles:[""]}),o})();var _=(()=>{return(o=_||(_={}))[o.OnlyGroup=0]="OnlyGroup",o[o.Global=1]="Global",_;var o})();let K=(()=>{class o extends S.x{constructor(e,i,s,c,p,d){super(s,c),this.dialogRef=e,this.data=i,this.subscriptionsGroupService=p,this.subscriptionsService=d,this.unsubscriptionType=_}ngOnInit(){this.createForm()}createForm(){this.detailsForm=this.fb.group({unsubscriptionType:[_.OnlyGroup,r.kI.required]})}saveInternal(){this.detailsForm.getRawValue().unsubscriptionType===_.OnlyGroup?this.subscriptionsGroupService.deleteSubscriptionFromSubscriptionsGroup(this.data.groupName,this.data.subscriptionId).pipe((0,l.R)(this.unsubscribe)).subscribe(()=>{this.confirm()}):this.subscriptionsService.unsubscribe(this.data.subscriptionId).pipe((0,l.R)(this.unsubscribe)).subscribe(()=>{this.confirm()})}close(){this.dialogRef.close({isClosed:!0})}confirm(){var e,i;this.dialogRef.close({isClosed:!1,unsubscriptionType:null===(i=null===(e=this.f)||void 0===e?void 0:e.unsubscriptionType)||void 0===i?void 0:i.value})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.so),t.Y36(u.WI),t.Y36(b.gz),t.Y36(r.qu),t.Y36(m.c6),t.Y36(m.do))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-confirm-unsubscribe-from-group-dialog"]],features:[t.qOj],decls:19,vars:18,consts:[["mat-dialog-title",""],[1,"mat-typography","row"],[1,"mt-3",3,"formGroup"],["formControlName","unsubscriptionType","aria-label","Select an option"],["color","primary",3,"value"],["color","primary",1,"ms-md-3","ms-md-3","mt-md-0","mt-2","mb-3",3,"value"],["align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"mat-dialog-content",1),t.TgZ(4,"form",2),t.TgZ(5,"mat-radio-group",3),t.TgZ(6,"mat-radio-button",4),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-radio-button",5),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"mat-dialog-actions",6),t.TgZ(13,"button",7),t.NdJ("click",function(){return i.save()}),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"button",8),t.NdJ("click",function(){return i.close()}),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,8,"MODALS.PLEASE_MAKE_A_CHOISE")),t.xp6(3),t.Q6J("formGroup",i.detailsForm),t.xp6(2),t.Q6J("value",i.unsubscriptionType.OnlyGroup),t.xp6(1),t.Oqu(t.lcZ(8,10,"MODALS.UNSUBSCRIBE_FROM_GROUP.ONLY_GROUP")),t.xp6(2),t.Q6J("value",i.unsubscriptionType.Global),t.xp6(1),t.Oqu(t.lcZ(11,12,"MODALS.UNSUBSCRIBE_FROM_GROUP.GLOBAL")),t.xp6(4),t.Oqu(t.lcZ(15,14,"ACTIONS.CONFIRM")),t.xp6(3),t.Oqu(t.lcZ(18,16,"ACTIONS.CLOSE")))},directives:[u.uh,u.xY,r._Y,r.JL,r.sg,Z.VQ,r.JJ,r.u,Z.U0,u.H8,v.lW],pipes:[g.X$],styles:[""]}),o})();const X=function(o){return{fieldName:o}};function tt(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.xi3(2,1,"VALIDATION.ERRORS.FIELD_REQUIRED",t.VKq(6,X,t.lcZ(3,4,"MODALS.ADD_NEW_GROUP.GROUP_NAME")))," "))}let E=(()=>{class o extends S.x{constructor(e,i,s,c,p){super(i,s),this.dialogRef=e,this.data=c,this.subscriptionsGroupService=p}ngOnInit(){this.createForm(),this.isNew()||this.f.groupName.setValue(this.data.groupName)}saveInternal(){let e=this.detailsForm.getRawValue();this.isNew()?this.subscriptionsGroupService.addSubscriptionsGroup(e.groupName).pipe((0,l.R)(this.unsubscribe)).subscribe(()=>{this.close()}):this.subscriptionsGroupService.updateSubscriptionsGroup(this.data.groupId,e.groupName).pipe((0,l.R)(this.unsubscribe)).subscribe(()=>{this.close()})}close(){this.dialogRef.close(!1)}confirm(){this.dialogRef.close(!0)}createForm(){this.detailsForm=this.fb.group({groupName:[null,r.kI.required]})}isNew(){var e;return null==this.data||!(null===(e=this.data)||void 0===e?void 0:e.groupId)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.so),t.Y36(b.gz),t.Y36(r.qu),t.Y36(u.WI),t.Y36(m.c6))},o.\u0275cmp=t.Xpm({type:o,selectors:[["upsert-new-subscriptions-group-dialog"]],features:[t.qOj],decls:16,vars:16,consts:[["mat-dialog-title",""],[1,"mat-typography","row"],[3,"formGroup"],[1,"col-12","mt-3"],["formControlName","groupName","matInput","","required","",3,"placeholder"],[4,"ngIf"],["align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"mat-dialog-content",1),t.TgZ(4,"form",2),t.TgZ(5,"mat-form-field",3),t._UZ(6,"input",4),t.ALo(7,"translate"),t.YNc(8,tt,4,8,"mat-error",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"mat-dialog-actions",6),t.TgZ(10,"button",7),t.NdJ("click",function(){return i.save()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"button",8),t.NdJ("click",function(){return i.close()}),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,8,"MODALS.ADD_NEW_GROUP.TITLE")),t.xp6(3),t.Q6J("formGroup",i.detailsForm),t.xp6(1),t.ekj("mat-form-field-invalid",i.submitted&&(null==i.f.groupName||null==i.f.groupName.errors?null:i.f.groupName.errors.required)),t.xp6(1),t.Q6J("placeholder",t.lcZ(7,10,"MODALS.ADD_NEW_GROUP.GROUP_NAME")),t.xp6(2),t.Q6J("ngIf",i.submitted&&(null==i.f.groupName||null==i.f.groupName.errors?null:i.f.groupName.errors.required)),t.xp6(3),t.Oqu(t.lcZ(12,12,"ACTIONS.CONFIRM")),t.xp6(3),t.Oqu(t.lcZ(15,14,"ACTIONS.CLOSE")))},directives:[u.uh,u.xY,r._Y,r.JL,r.sg,T.KE,r.Fj,I.Nt,r.JJ,r.u,r.Q7,h.O5,T.TO,u.H8,v.lW],pipes:[g.X$],styles:[""]}),o})();var A=a(1125),U=a(6688),et=a(5245);const ot=function(o){return{fieldName:o}};function it(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.xi3(2,1,"VALIDATION.ERRORS.FIELD_REQUIRED",t.VKq(6,ot,t.lcZ(3,4,"MAIN.SUBSCRIBE.CHANNEL_NAME")))," "))}function nt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().viewGroupMessages()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"BUTTONS.VIEW_ALL"),""))}function st(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetDefaultSubscriptionGroup()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"BUTTONS.SET_THIS_GROUP_AS_DEFAULT"),""))}function rt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"MAIN.SUBSCRIBE.NO_ACTIVE_SUBSCRIPTIONS")," "))}function at(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-chip",19),t.NdJ("removed",function(){const c=t.CHM(e).$implicit;return t.oxw().unsubscribeChannel(c)}),t.TgZ(1,"span",20),t._uU(2),t.qZA(),t._UZ(3,"i",21),t.TgZ(4,"button",22),t.TgZ(5,"mat-icon"),t._uU(6,"cancel"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(2),t.hij(" ",e.displayChannelName," "),t.xp6(1),t.Q6J("networkType",e.networkType)}}function ct(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().viewGroupMessages(s.groupName)}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"BUTTONS.VIEW_THIS_GROUP"),""))}function lt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().setSubscriptionGroupAsDefault(s)}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"BUTTONS.SET_THIS_GROUP_AS_DEFAULT"),""))}function pt(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"MAIN.SUBSCRIBE.NO_ACTIVE_SUBSCRIPTIONS"),""))}function ut(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-chip",19),t.NdJ("removed",function(){const c=t.CHM(e).$implicit,p=t.oxw().$implicit;return t.oxw().unsubscribeGroupChannel(null==p?null:p.groupName,c)}),t.TgZ(1,"span",20),t._uU(2),t.qZA(),t._UZ(3,"i",21),t.TgZ(4,"button",22),t.TgZ(5,"mat-icon"),t._uU(6,"cancel"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit;t.xp6(2),t.hij(" ",e.displayChannelName," "),t.xp6(1),t.Q6J("networkType",e.networkType)}}function mt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-expansion-panel"),t.TgZ(1,"mat-expansion-panel-header"),t.TgZ(2,"mat-panel-title",23),t.TgZ(3,"span",24),t._uU(4),t.qZA(),t.TgZ(5,"i",25),t.NdJ("click",function(s){const p=t.CHM(e).$implicit,d=t.oxw();return s.stopPropagation(),s.preventDefault(),d.editGroup(p)}),t.qZA(),t.TgZ(6,"i",26),t.NdJ("click",function(s){const p=t.CHM(e).$implicit,d=t.oxw();return s.stopPropagation(),s.preventDefault(),d.deleteGroup(p)}),t.qZA(),t.qZA(),t.qZA(),t.YNc(7,ct,3,3,"button",27),t.YNc(8,lt,3,3,"button",27),t.TgZ(9,"button",28),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().addSubscriptionToGroup(c.groupName)}),t._UZ(10,"i",10),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",13),t.TgZ(14,"mat-chip-list"),t.YNc(15,pt,3,3,"p",6),t.YNc(16,ut,7,2,"mat-chip",14),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=n.$implicit,i=t.oxw();t.xp6(1),t.ekj("current-group",e.groupName===i.currentGroupName)("default-group",e.groupName===i.defaultGroupName),t.xp6(3),t.hij(" ",e.groupName," "),t.xp6(3),t.Q6J("ngIf",e.subscriptions&&(null==e||null==e.subscriptions?null:e.subscriptions.length)>0&&i.currentGroupName!=e.groupName),t.xp6(1),t.Q6J("ngIf",e.groupName!==i.defaultGroupName),t.xp6(3),t.hij(" ",t.lcZ(12,10,"BUTTONS.ADD_SUBSCRIPTION"),""),t.xp6(4),t.Q6J("ngIf",!(null!=e&&e.subscriptions)||0===(null==e||null==e.subscriptions?null:e.subscriptions.length)),t.xp6(1),t.Q6J("ngForOf",e.subscriptions)}}let dt=(()=>{class o extends S.x{constructor(e,i,s,c,p,d,Gt){super(e,i),this.currentGroupService=s,this.subscriptionsGroupService=c,this.subscriptionsService=p,this.dialog=d,this.translate=Gt,this.groupSelected=new t.vpe,this.defaultGroupName=null,this.networks=Object.values(m.td),this.userSubscriptions=[],this.groupSubscriptions=[],this.isMobileDevice=!1,this.currentGroupName=null}ngOnInit(){this.createForm(),this.loadSubscriptions(),this.isMobileDevice=this.isMobile(),this.currentGroupService.observeCurrentGroupChanged().pipe((0,l.R)(this.unsubscribe)).subscribe(e=>{this.currentGroupName=e})}createForm(){this.detailsForm=this.fb.group({networkType:["Telegram",r.kI.required],channelName:[null,r.kI.required]})}saveInternal(){let e=this.detailsForm.getRawValue();this.subscriptionsService.subscribe(e.networkType,e.channelName).pipe((0,l.R)(this.unsubscribe)).subscribe({error:()=>{this.f.channelName.reset(),this.resetSubmit()},complete:()=>{this.f.channelName.reset(),this.resetSubmit(),this.loadSubscriptions()}})}unsubscribeChannel(e){this.dialog.open(x,{disableClose:!0,autoFocus:!1,minWidth:"25vw",data:{dialogTitle:this.translate.instant("MODALS.CONFIRM.TITLE"),confirmationText:this.translate.instant("MODALS.CONFIRM.UNSUBSCRIBE")}}).afterClosed().pipe((0,l.R)(this.unsubscribe)).subscribe(i=>{i&&this.subscriptionsService.unsubscribe(e.id).pipe((0,l.R)(this.unsubscribe)).subscribe(s=>{this.currentGroupName||this.viewGroupMessages(),this.loadSubscriptions()})})}viewGroupMessages(e=null){this.currentGroupName=e,this.groupSelected.emit(e)}addSubscriptionToGroup(e){this.dialog.open(W,{height:"auto",disableClose:!0,autoFocus:!1,minWidth:"25vw",data:{groupName:e}}).afterClosed().pipe((0,l.R)(this.unsubscribe)).subscribe(i=>{i.isClosed||(this.loadSubscriptions(),i.subscriptionType!==f.NewSubscription||this.currentGroupName?e===this.currentGroupName&&this.viewGroupMessages(e):this.viewGroupMessages())})}addNewGroup(){this.dialog.open(E,{disableClose:!0,autoFocus:!1,minWidth:"25vw"}).afterClosed().pipe((0,l.R)(this.unsubscribe)).subscribe(()=>{this.loadSubscriptions()})}editGroup(e){this.dialog.open(E,{disableClose:!0,autoFocus:!1,minWidth:"25vw",data:{groupName:e.groupName,groupId:e.id}}).afterClosed().pipe((0,l.R)(this.unsubscribe)).subscribe(()=>{this.loadSubscriptions()})}refresh(){this.viewGroupMessages(this.currentGroupName)}unsubscribeGroupChannel(e,i){this.dialog.open(K,{disableClose:!0,autoFocus:!1,minWidth:"25vw",data:{groupName:e,subscriptionId:i.id}}).afterClosed().pipe((0,l.R)(this.unsubscribe)).subscribe(s=>{s.isClosed||(s.unsubscriptionType==_.Global?(!this.currentGroupName||e==this.currentGroupName)&&this.viewGroupMessages():e==this.currentGroupName&&this.viewGroupMessages(this.currentGroupName),this.loadSubscriptions())})}loadSubscriptions(){this.subscriptionsService.subscriptions().pipe((0,l.R)(this.unsubscribe)).subscribe(e=>{this.userSubscriptions=null!=e?e:[]}),this.subscriptionsGroupService.groupSubscriptions().pipe((0,l.R)(this.unsubscribe)).subscribe(e=>{this.groupSubscriptions=null!=e?e:[]})}deleteGroup(e){this.dialog.open(x,{disableClose:!0,autoFocus:!1,minWidth:"25vw",data:{dialogTitle:this.translate.instant("MODALS.CONFIRM.TITLE"),confirmationText:this.translate.instant("MODALS.CONFIRM.DELETE_GROUP")}}).afterClosed().pipe((0,l.R)(this.unsubscribe)).subscribe(i=>{i&&this.subscriptionsGroupService.deleteSubscriptionGroup(e.id).pipe((0,l.R)(this.unsubscribe)).subscribe(()=>{this.currentGroupName==e.groupName&&(this.currentGroupName=null),this.loadSubscriptions()})})}resetDefaultSubscriptionGroup(){this.subscriptionsGroupService.resetDefaultSubscriptionGroup().pipe((0,l.R)(this.unsubscribe)).subscribe(()=>{this.defaultGroupName=null})}setSubscriptionGroupAsDefault(e){this.subscriptionsGroupService.setDefaultSubscriptionGroup(e.id).pipe((0,l.R)(this.unsubscribe)).subscribe(()=>{this.defaultGroupName=e.groupName})}isMobile(){let e=!1,i=window;return s=navigator.userAgent||navigator.vendor||i.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(s)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(s.substr(0,4)))&&(e=!0),e;var s}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.gz),t.Y36(r.qu),t.Y36(q),t.Y36(m.c6),t.Y36(m.do),t.Y36(u.uw),t.Y36(g.sK))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-subscriptions"]],inputs:{defaultGroupName:"defaultGroupName"},outputs:{groupSelected:"groupSelected"},features:[t.qOj],decls:38,vars:34,consts:[[3,"expanded"],[1,"row"],[3,"formGroup"],["formControlName","networkType",1,"col-12",3,"items","clearable"],[1,"col-12"],["formControlName","channelName","matInput","","required","",3,"placeholder"],[4,"ngIf"],["mat-raised-button","","color","primary",1,"col-12","mt-2",3,"click"],[1,"row","m-0","mt-3"],["mat-stroked-button","","color","primary",1,"col-12","p-1",3,"click"],[1,"fab","fa-plus","mb-1","me-2","plus-button"],[1,"mt-2","\u0441ustom-group-list"],["class","col-12 p-1 mb-1 mt-1","mat-stroked-button","","color","primary",3,"click",4,"ngIf"],[1,"row","chip-list"],["class","col-12",3,"removed",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",1,"col-12","mt-2",2,"background-color","#dcf2e4",3,"click"],[1,"fa-solid","fa-arrows-rotate"],["mat-stroked-button","","color","primary",1,"col-12","p-1","mb-1","mt-1",3,"click"],[1,"col-12",3,"removed"],[1,"truncate",2,"max-width","80%"],["networsItems","","aria-hidden","true",1,"ms-1",3,"networkType"],["matChipRemove","",1,"chip-close"],[2,"max-width","75%"],[1,"truncate"],[1,"fa","fa-pen","group-edit",3,"click"],[1,"fa","fa-close","group-delete",3,"click"],["class","col-12 p-1 mt-1 mb-1","mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary",1,"col-12","mt-1","p-1","mb-1",3,"click"],["mat-stroked-button","","color","primary",1,"col-12","p-1","mt-1","mb-1",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-accordion"),t.TgZ(1,"mat-expansion-panel",0),t.TgZ(2,"mat-expansion-panel-header"),t.TgZ(3,"mat-panel-title"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.TgZ(6,"div",1),t.TgZ(7,"form",2),t._UZ(8,"ng-select",3),t.TgZ(9,"mat-form-field",4),t._UZ(10,"input",5),t.ALo(11,"translate"),t.YNc(12,it,4,8,"mat-error",6),t.qZA(),t.TgZ(13,"button",7),t.NdJ("click",function(){return i.save()}),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.TgZ(16,"div",8),t.TgZ(17,"button",9),t.NdJ("click",function(){return i.addNewGroup()}),t._UZ(18,"i",10),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"mat-accordion",11),t.TgZ(22,"mat-expansion-panel"),t.TgZ(23,"mat-expansion-panel-header"),t.TgZ(24,"mat-panel-title"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.YNc(27,nt,3,3,"button",12),t.YNc(28,st,3,3,"button",12),t.TgZ(29,"div",13),t.TgZ(30,"mat-chip-list"),t.YNc(31,rt,3,3,"p",6),t.YNc(32,at,7,2,"mat-chip",14),t.qZA(),t.qZA(),t.qZA(),t.YNc(33,mt,17,12,"mat-expansion-panel",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"button",16),t.NdJ("click",function(){return i.refresh()}),t._UZ(35,"i",17),t._uU(36),t.ALo(37,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("expanded",!i.isMobileDevice),t.xp6(3),t.hij(" ",t.lcZ(5,22,"MAIN.SUBSCRIBE.SUBSCRIBE_TO_NEW_CHANNEL")," "),t.xp6(3),t.Q6J("formGroup",i.detailsForm),t.xp6(1),t.Q6J("items",i.networks)("clearable",!1),t.xp6(1),t.ekj("mat-form-field-invalid",i.submitted&&(null==i.f.channelName?null:i.f.channelName.errors)),t.xp6(1),t.Q6J("placeholder",t.lcZ(11,24,"MAIN.SUBSCRIBE.CHANNEL_NAME")),t.xp6(2),t.Q6J("ngIf",i.submitted&&(null==i.f.channelName||null==i.f.channelName.errors?null:i.f.channelName.errors.required)),t.xp6(2),t.hij(" ",t.lcZ(15,26,"MAIN.SUBSCRIBE.SUBSCRIBE"),""),t.xp6(5),t.hij(" ",t.lcZ(20,28,"BUTTONS.ADD_NEW_GROUP"),""),t.xp6(4),t.ekj("current-group",!i.currentGroupName)("default-group",!i.defaultGroupName),t.xp6(2),t.hij(" ",t.lcZ(26,30,"MAIN.SUBSCRIBE.ALL_SUBSCRIPTIONS")," "),t.xp6(2),t.Q6J("ngIf",i.userSubscriptions.length>0&&i.currentGroupName),t.xp6(1),t.Q6J("ngIf",i.defaultGroupName),t.xp6(3),t.Q6J("ngIf",0===i.userSubscriptions.length),t.xp6(1),t.Q6J("ngForOf",i.userSubscriptions),t.xp6(1),t.Q6J("ngForOf",i.groupSubscriptions),t.xp6(3),t.hij(" ",t.lcZ(37,32,"BUTTONS.REFRESH_MESSAGES"),""))},directives:[A.pp,A.ib,A.yz,A.yK,r._Y,r.JL,r.sg,C.w9,r.JJ,r.u,T.KE,r.Fj,I.Nt,r.Q7,h.O5,T.TO,v.lW,U.qn,h.sg,U.HS,w,U.qH,et.Hw],pipes:[g.X$],styles:['@charset "UTF-8";.chip-close[_ngcontent-%COMP%]{position:absolute;right:10px}.group-delete[_ngcontent-%COMP%]{position:absolute;right:50px;bottom:14px;font-size:15px}.group-edit[_ngcontent-%COMP%]{position:absolute;right:70px;bottom:15px;font-size:13px}.chip-list[_ngcontent-%COMP%]{min-height:5vh;max-height:40vh!important;overflow:auto}[_nghost-%COMP%]     .mat-chip-list-wrapper{margin:0}.plus-button[_ngcontent-%COMP%]{font-size:25px}.\\441ustom-group-list[_ngcontent-%COMP%]{padding:1px;max-height:55vh!important;overflow:auto}.default-group[_ngcontent-%COMP%]{background-color:#e9f09e!important}.current-group[_ngcontent-%COMP%]{background-color:#cee8ac!important}']}),o})();var N=a(9224);const gt=["videoElement"];let bt=(()=>{class o{ngAfterViewInit(){if(Hls.isSupported()){const e=new Hls;e.loadSource(this.src),e.attachMedia(this.videoElement.nativeElement)}else this.videoElement.nativeElement.canPlayType("application/vnd.apple.mpegurl")&&(this.videoElement.nativeElement.src=this.src)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-m3u8-reader"]],viewQuery:function(e,i){if(1&e&&t.Gf(gt,5),2&e){let s;t.iGM(s=t.CRH())&&(i.videoElement=s.first)}},inputs:{src:"src"},decls:3,vars:0,consts:[[1,"row","m-0","p-0"],["controls","",1,"audio"],["videoElement",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"video",1,2),t.qZA())},styles:[""]}),o})();function ft(o,n){1&o&&(t.TgZ(0,"p",7),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",8),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"MAIN.NO_MESSAGES")," "))}function ht(o,n){if(1&o&&t._UZ(0,"img",25),2&o){const e=t.oxw().$implicit;t.Q6J("src",e.contentUrl,t.LSH)}}function _t(o,n){if(1&o&&t._UZ(0,"iframe",26),2&o){const e=t.oxw().$implicit;t.Q6J("src",e.contentUrl,t.uOi)}}function Tt(o,n){if(1&o&&(t.TgZ(0,"video",27),t._UZ(1,"source",28),t._uU(2," Sorry, your browser doesn't support embedded videos. "),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("src",e.contentUrl,t.LSH)}}function vt(o,n){if(1&o&&t._UZ(0,"video",29),2&o){const e=t.oxw().$implicit;t.Q6J("src",e.contentUrl,t.LSH)}}function St(o,n){if(1&o&&(t.TgZ(0,"a",30),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.Q6J("href",e.contentUrl,t.LSH),t.xp6(1),t.hij(" ",e.name," ")}}function Zt(o,n){if(1&o&&(t.TgZ(0,"audio",31),t._uU(1," Your browser does not support the "),t.TgZ(2,"code"),t._uU(3,"audio"),t.qZA(),t._uU(4," element. "),t.qZA()),2&o){const e=t.oxw().$implicit,i=t.oxw(2).$implicit;t.Q6J("preload","Telegram"===i.networkType?"none":"auto")("src",e.contentUrl,t.LSH)}}function Ct(o,n){if(1&o&&t._UZ(0,"app-m3u8-reader",32),2&o){const e=t.oxw().$implicit;t.Q6J("src",e.contentUrl)}}function At(o,n){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,ht,1,1,"img",18),t.YNc(2,_t,1,1,"iframe",19),t.YNc(3,Tt,3,1,"video",20),t.YNc(4,vt,1,1,"video",21),t.YNc(5,St,2,2,"a",22),t.YNc(6,Zt,5,2,"audio",23),t.YNc(7,Ct,1,1,"app-m3u8-reader",24),t.qZA()),2&o){const e=n.$implicit,i=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf","Photo"===e.mediaType),t.xp6(1),t.Q6J("ngIf","Video"===e.mediaType&&"VK"==i.networkType),t.xp6(1),t.Q6J("ngIf","Video"===e.mediaType&&("Telegram"==i.networkType||"Twitter"==i.networkType)),t.xp6(1),t.Q6J("ngIf","GIF"===e.mediaType),t.xp6(1),t.Q6J("ngIf","Document"===e.mediaType),t.xp6(1),t.Q6J("ngIf","Audio"===e.mediaType&&"VK"!==i.networkType),t.xp6(1),t.Q6J("ngIf","Audio"===e.mediaType&&"VK"===i.networkType)}}function Nt(o,n){if(1&o&&(t.ynx(0),t.YNc(1,At,8,7,"div",16),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.networkMedia)}}function xt(o,n){if(1&o&&(t.TgZ(0,"mat-card",9),t.TgZ(1,"mat-card-header"),t.TgZ(2,"mat-card-title",10),t.TgZ(3,"a",11),t._uU(4),t.qZA(),t._UZ(5,"i",12),t.qZA(),t.qZA(),t.TgZ(6,"mat-card-content",13),t.TgZ(7,"p",14),t._uU(8),t.qZA(),t.YNc(9,Nt,2,1,"ng-container",15),t.qZA(),t.qZA()),2&o){const e=n.$implicit;t.xp6(3),t.Q6J("href",e.originalContentLink,t.LSH),t.xp6(1),t.hij("",e.channelName," "),t.xp6(1),t.Q6J("networkType",e.networkType),t.xp6(3),t.hij(" ",e.text," "),t.xp6(1),t.Q6J("ngIf",(null==e.networkMedia?null:e.networkMedia.length)>0)}}const It=[{path:"",component:J,canActivate:[L.a],children:[{path:"",component:(()=>{class o extends O.V{constructor(e,i,s,c,p){super(),this.currentGroupService=e,this.subscriptionsGroupService=i,this.messagesService=s,this.sanitazer=c,this.loaderService=p,this.numberOfMessages=20,this.updateMessagesSubject=new M.x,this.isUpdatingNow=!1,this.stopReceiveMessages=!1,this.defaultGroupName=null,this.count=20,this.offset=0,this.messages=[]}ngOnInit(){this.initMessageLoader(),this.subscriptionsGroupService.getUserDefaultSubscriptionGroup().pipe((0,l.R)(this.unsubscribe)).subscribe(e=>{e.isUserHasDefaultGroup?(this.defaultGroupName=e.groupName,this.updateMessages(e.groupName),this.currentGroupService.notifyCurrentGroupChanged(e.groupName)):this.updateMessages()})}ngOnDestroy(){this.updateMessagesSubject.complete(),super.ngOnDestroy()}onScroll(e){e.scrollingElement.scrollHeight/1.5<=e.scrollingElement.scrollTop&&!this.isUpdatingNow&&(this.loaderService.hideRequest(),this.updateMessages())}updateMessages(e=null){this.updateMessagesSubject.next(e)}initMessageLoader(){this.updateMessagesSubject.asObservable().pipe((0,l.R)(this.unsubscribe),(0,k.w)(e=>(this.isUpdatingNow=!0,this.stopReceiveMessages?Y.E:this.messagesService.getFiltered(this.count,this.offset,e).pipe((0,l.R)(this.unsubscribe),(0,Q.K)(i=>{throw this.isUpdatingNow=!1,i}))))).subscribe({next:e=>{let i=e.filter(s=>!this.messages.some(c=>c.originalContentLink==s.originalContentLink));i.forEach(s=>{var c;null===(c=s.networkMedia)||void 0===c||c.forEach(p=>{s.networkType==m.td.VK&&p.mediaType==m.DD.Video&&(p.contentUrl=this.buildSafeUrlForIframe(p.contentUrl)),s.networkType==m.td.Telegram&&(p.contentUrl=this.buildContentLink(p.contentUrl))})}),0===i.length&&(this.stopReceiveMessages=!0),this.messages=[...this.messages,...i],this.isUpdatingNow=!1,this.offset=this.count,this.count+=this.numberOfMessages}})}groupSelected(e=null){this.count=this.numberOfMessages,this.offset=0,this.messages=[],this.stopReceiveMessages=!1,this.updateMessages(e)}buildContentLink(e){return e?e.includes("api/messages/")?`${e}&access_token=${localStorage.getItem("access_token")}`:e:""}buildSafeUrlForIframe(e){return this.sanitazer.bypassSecurityTrustResourceUrl(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(q),t.Y36(m.c6),t.Y36(m.Kw),t.Y36(B.H7),t.Y36(j.D))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-main"]],hostBindings:function(e,i){1&e&&t.NdJ("scroll",function(c){return i.onScroll(c.target)},!1,t.Jf7)},features:[t.qOj],decls:7,vars:3,consts:[[1,"row"],[1,"col-md-4","col-sm-12","mt-3"],[3,"defaultGroupName","groupSelected"],[1,"col-md-8","col-sm-12","row","m-0",2,"height","80vh"],[1,"col-12","p-0"],["class","text-center mt-3","style","font-size: 25px;",4,"ngIf"],["class","mt-3 mat-elevation-z4",4,"ngFor","ngForOf"],[1,"text-center","mt-3",2,"font-size","25px"],[1,"fa-solid","fa-comments"],[1,"mt-3","mat-elevation-z4"],[1,"d-inline-flex"],["target","_blank",1,"d-block","max-width-40","truncate",3,"href"],["networsItems","","aria-hidden","true",1,"ms-2",3,"networkType"],[1,"card-content-wrapper"],[1,"col-12","mt-2","custom-font"],[4,"ngIf"],["class","fit-content row col-12",4,"ngFor","ngForOf"],[1,"fit-content","row","col-12"],["class","photo",3,"src",4,"ngIf"],["loading","lazy","class","video","controls","","webkitallowfullscreen","","mozallowfullscreen","","allowfullscreen","",3,"src",4,"ngIf"],["poster","../../../../../../assets/images/start-button.png","class","video","controls","controls","preload","none",4,"ngIf"],["autoplay","","loop","","muted","","playsinline","","controls","",3,"src",4,"ngIf"],["target","_blank","download","",3,"href",4,"ngIf"],["class","audio","controls","",3,"preload","src",4,"ngIf"],["class","m-0 p-0",3,"src",4,"ngIf"],[1,"photo",3,"src"],["loading","lazy","controls","","webkitallowfullscreen","","mozallowfullscreen","","allowfullscreen","",1,"video",3,"src"],["poster","../../../../../../assets/images/start-button.png","controls","controls","preload","none",1,"video"],["type","video/mp4",3,"src"],["autoplay","","loop","","muted","","playsinline","","controls","",3,"src"],["target","_blank","download","",3,"href"],["controls","",1,"audio",3,"preload","src"],[1,"m-0","p-0",3,"src"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"app-subscriptions",2),t.NdJ("groupSelected",function(c){return i.groupSelected(c)}),t.qZA(),t.qZA(),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.YNc(5,ft,4,3,"p",5),t.YNc(6,xt,10,5,"mat-card",6),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("defaultGroupName",i.defaultGroupName),t.xp6(3),t.Q6J("ngIf",0===i.messages.length),t.xp6(1),t.Q6J("ngForOf",i.messages))},directives:[dt,h.O5,h.sg,N.a8,N.dk,N.n5,w,N.dn,bt],pipes:[g.X$],styles:["[_nghost-%COMP%]     mat-card>mat-card-header>div.mat-card-header-text{margin-left:0}.card-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}a[_ngcontent-%COMP%]{color:#0f7afc;border-bottom-color:#0f7afc33;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#cf0000;border-bottom-color:#d0400033;text-decoration:none}a[_ngcontent-%COMP%]:visited{color:purple;border-bottom-color:#80008033;text-decoration:none}.fit-content[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content}.video[_ngcontent-%COMP%]{max-width:70%;max-height:70%;min-height:50vh;min-width:35vw}.photo[_ngcontent-%COMP%]{max-width:90%;max-height:90%}.custom-font[_ngcontent-%COMP%]{font:message-box;font-family:Roboto}"]}),o})()}]}];let Ut=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[b.Bz.forChild(It)],b.Bz]}),o})();var yt=a(7401);let Ot=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[],imports:[[Ut,h.ez,D.m,yt.PagesModule]]}),o})()}}]);