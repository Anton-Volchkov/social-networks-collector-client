"use strict";(self.webpackChunkSNC=self.webpackChunkSNC||[]).push([[118],{2118:(Dt,k,a)=>{a.r(k),a.d(k,{MainModule:()=>Rt});var b=a(9808),L=a(654),f=a(6696),D=a(4694),t=a(5e3),c=a(2722),u=a(8966),T=a(7423),g=a(4218);let x=(()=>{class i{constructor(e,o){this.dialogRef=e,this.data=o}ngOnInit(){}close(){this.dialogRef.close(!1)}confirm(){this.dialogRef.close(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(u.so),t.Y36(u.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-confirm-dialog"]],decls:12,vars:8,consts:[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content",1),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.qZA(),t.TgZ(5,"mat-dialog-actions",2),t.TgZ(6,"button",3),t.NdJ("click",function(){return o.confirm()}),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(){return o.close()}),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(o.data.dialogTitle),t.xp6(3),t.Oqu(o.data.confirmationText),t.xp6(3),t.Oqu(t.lcZ(8,4,"ACTIONS.CONFIRM")),t.xp6(3),t.Oqu(t.lcZ(11,6,"ACTIONS.CLOSE")))},directives:[u.uh,u.xY,u.H8,T.lW],pipes:[g.X$],styles:[""]}),i})();var w=a(3411),M=a(9292);let F=(()=>{class i extends w.V{constructor(e,o,s){super(),this.router=e,this.dialog=o,this.translate=s,this.isCollapsed=!0}ngOnInit(){}logout(){this.dialog.open(x,{disableClose:!0,autoFocus:!1,minWidth:"25vw",data:{dialogTitle:this.translate.instant("MODALS.CONFIRM.TITLE"),confirmationText:this.translate.instant("MODALS.CONFIRM.LOGOUT")}}).afterClosed().pipe((0,c.R)(this.unsubscribe)).subscribe(e=>{e&&(localStorage.removeItem("access_token"),this.router.navigateByUrl("/login"))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.F0),t.Y36(u.uw),t.Y36(g.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-header"]],features:[t.qOj],decls:13,vars:5,consts:[[1,"navbar","navbar-inverse","navbar-fixed-top","navbar-expand-lg","navbar-dark","bg-dark","p-2"],[1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarTogglerDemo02","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler","btn","btn-outline-primary",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse",3,"ngbCollapse"],[1,"navbar-nav"],[1,"navbar-nav","ms-auto","mb-2","mb-lg-0"],["type","submit",1,"btn","btn-outline-success",3,"click"],[1,"fa-solid","fa-arrow-right-from-bracket"]],template:function(e,o){1&e&&(t.TgZ(0,"nav",0),t.TgZ(1,"span",1),t._uU(2,"SNC"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return o.isCollapsed=!o.isCollapsed}),t._UZ(4,"span",3),t.qZA(),t.TgZ(5,"div",4),t._UZ(6,"ul",5),t.TgZ(7,"ul",6),t.TgZ(8,"li"),t.TgZ(9,"button",7),t.NdJ("click",function(){return o.logout()}),t._uU(10),t.ALo(11,"translate"),t._UZ(12,"i",8),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.uIk("aria-expanded",!o.isCollapsed),t.xp6(2),t.Q6J("ngbCollapse",o.isCollapsed),t.xp6(5),t.hij(" ",t.lcZ(11,3,"BUTTONS.LOGOUT")," "))},directives:[M.M2,M._D],pipes:[g.X$],styles:[""]}),i})(),J=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-main-board"]],decls:3,vars:0,consts:[[1,"container"]],template:function(e,o){1&e&&(t._UZ(0,"app-header"),t.TgZ(1,"div",0),t._UZ(2,"router-outlet"),t.qZA())},directives:[F,f.lC],styles:[""]}),i})();var O=a(7579),Y=a(8505),E=a(3900),Q=a(515),B=a(262),m=a(3785);let y=(()=>{class i{constructor(){this.currentGroupChanged=new O.x}notifyCurrentGroupChanged(e){this.currentGroupChanged.next(e)}observeCurrentGroupChanged(){return this.currentGroupChanged.asObservable()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var P=a(2313),j=a(5697),r=a(3075),v=a(9878),C=a(9814),Z=a(4376);let U=(()=>{class i{constructor(e,o){this.el=e,this.renderer=o}ngAfterViewInit(){this.addClassesForComponent()}addClassesForComponent(){let e=["fab"];this.networkType==m.td.Telegram&&e.push("fa-telegram","telegram-icon"),this.networkType==m.td.VK&&e.push("fa-vk","vk-icon"),this.networkType==m.td.Twitter&&e.push("fa-twitter","twitter-icon"),e.forEach(o=>{this.renderer.addClass(this.el.nativeElement,o)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj))},i.\u0275dir=t.lG2({type:i,selectors:[["i","networsItems",""]],inputs:{networkType:"networkType"}}),i})();var S=a(7322),G=a(7531);function H(i,n){if(1&i&&(t.TgZ(0,"span",14),t._uU(1),t.qZA(),t._UZ(2,"i",15)),2&i){const e=n.item;t.xp6(1),t.hij(" ",e.displayChannelName," "),t.xp6(1),t.Q6J("networkType",e.networkType)}}function $(i,n){if(1&i&&(t.TgZ(0,"ng-select",12),t.ALo(1,"translate"),t.YNc(2,H,3,2,"ng-template",13),t.qZA()),2&i){const e=t.oxw();t.ekj("ng-invalid",e.submitted&&(null==e.f.activeSubscription||null==e.f.activeSubscription.errors?null:e.f.activeSubscription.errors.required)),t.Q6J("placeholder",t.lcZ(1,4,"MAIN.SUBSCRIBE.CHANNEL_NAME"))("items",e.activeSubscriptions)}}const R=function(i){return{fieldName:i}};function V(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.xi3(2,1,"VALIDATION.ERRORS.FIELD_REQUIRED",t.VKq(6,R,t.lcZ(3,4,"MAIN.SUBSCRIBE.CHANNEL_NAME")))," "))}function z(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.xi3(2,1,"VALIDATION.ERRORS.FIELD_REQUIRED",t.VKq(6,R,t.lcZ(3,4,"MAIN.SUBSCRIBE.CHANNEL_NAME")))," "))}function W(i,n){if(1&i&&(t.ynx(0),t._UZ(1,"ng-select",16),t.TgZ(2,"mat-form-field",17),t._UZ(3,"input",18),t.ALo(4,"translate"),t.YNc(5,z,4,8,"mat-error",8),t.qZA(),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("items",e.networks)("clearable",!1),t.xp6(1),t.ekj("mat-form-field-invalid",e.submitted&&(null==e.f.channelName?null:e.f.channelName.errors)),t.xp6(1),t.Q6J("placeholder",t.lcZ(4,6,"MAIN.SUBSCRIBE.CHANNEL_NAME")),t.xp6(2),t.Q6J("ngIf",e.submitted&&(null==e.f.channelName||null==e.f.channelName.errors?null:e.f.channelName.errors.required))}}var h=(()=>{return(i=h||(h={}))[i.ExistingSubscription=0]="ExistingSubscription",i[i.NewSubscription=1]="NewSubscription",h;var i})();let K=(()=>{class i extends v.x{constructor(e,o,s,l,p,d){super(s,l),this.dialogRef=e,this.data=o,this.subscriptionsGroupService=p,this.subscriptionsService=d,this.networks=Object.values(m.td),this.activeSubscriptions=[],this.subscriptionType=h}ngOnInit(){this.loadActiveSubscriptions(),this.createForm()}saveInternal(){let e=this.detailsForm.getRawValue();this.isActiveSubscriptionsSelected()?this.subscriptionsGroupService.addSubscriptionToSubscriptionsGroup(this.data.groupName,e.activeSubscription).pipe((0,c.R)(this.unsubscribe)).subscribe(()=>{this.confirm()}):this.subscriptionsService.subscribe(e.networkType,e.channelName).pipe((0,E.w)(o=>this.subscriptionsGroupService.addSubscriptionToSubscriptionsGroup(this.data.groupName,o)),(0,c.R)(this.unsubscribe)).subscribe(o=>{this.confirm()})}close(){this.dialogRef.close({isClosed:!0})}confirm(){var e,o;this.dialogRef.close({isClosed:!1,subscriptionType:null===(o=null===(e=this.f)||void 0===e?void 0:e.subscriptionType)||void 0===o?void 0:o.value})}createForm(){this.detailsForm=this.fb.group({subscriptionType:[h.ExistingSubscription,r.kI.required],activeSubscription:[null,r.kI.required],networkType:[{disabled:!0,value:"Telegram"},r.kI.required],channelName:[{disabled:!0,value:null},r.kI.required]}),this.f.subscriptionType.valueChanges.pipe((0,c.R)(this.unsubscribe)).subscribe(e=>{e===h.ExistingSubscription?(this.f.activeSubscription.enable(),this.f.networkType.disable(),this.f.channelName.disable()):(this.f.activeSubscription.disable(),this.f.networkType.enable(),this.f.channelName.enable()),this.detailsForm.updateValueAndValidity()})}isActiveSubscriptionsSelected(){var e,o;return(null===(o=null===(e=this.f)||void 0===e?void 0:e.subscriptionType)||void 0===o?void 0:o.value)===h.ExistingSubscription}loadActiveSubscriptions(){this.subscriptionsGroupService.getValidActiveSubscriptionsForGroup(this.data.groupName).pipe((0,c.R)(this.unsubscribe)).subscribe(e=>{this.activeSubscriptions=null!=e?e:[]})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(u.so),t.Y36(u.WI),t.Y36(f.gz),t.Y36(r.qu),t.Y36(m.c6),t.Y36(m.do))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-subscription-to-group-dialog"]],features:[t.qOj],decls:23,vars:21,consts:[["mat-dialog-title",""],[1,"mat-typography","row",2,"min-height","11vh"],[1,"mt-3",3,"formGroup"],["formControlName","subscriptionType","aria-label","Select an option",1,"mb-2"],["color","primary",3,"value"],["color","primary",1,"ms-md-3","ms-md-3","mt-md-0","mt-2",3,"value"],[1,"mt-2"],["appendTo","body","bindValue","id","formControlName","activeSubscription","class","col-12 pb-0",3,"ng-invalid","placeholder","items",4,"ngIf"],[4,"ngIf"],["align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],["appendTo","body","bindValue","id","formControlName","activeSubscription",1,"col-12","pb-0",3,"placeholder","items"],["ng-option-tmp","","ng-label-tmp",""],[1,"truncate",2,"max-width","80%"],["networsItems","","aria-hidden","true",1,"ms-1",3,"networkType"],["appendTo","body","formControlName","networkType",1,"col-12","pb-0",3,"items","clearable"],[1,"col-12","mt-3"],["formControlName","channelName","matInput","","required","",3,"placeholder"]],template:function(e,o){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"mat-dialog-content",1),t.TgZ(4,"form",2),t.TgZ(5,"mat-radio-group",3),t.TgZ(6,"mat-radio-button",4),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-radio-button",5),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.qZA(),t.TgZ(12,"div",6),t.YNc(13,$,3,6,"ng-select",7),t.YNc(14,V,4,8,"mat-error",8),t.qZA(),t.YNc(15,W,6,8,"ng-container",8),t.qZA(),t.qZA(),t.TgZ(16,"mat-dialog-actions",9),t.TgZ(17,"button",10),t.NdJ("click",function(){return o.save()}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"button",11),t.NdJ("click",function(){return o.close()}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,11,"MODALS.PLEASE_MAKE_A_CHOISE")),t.xp6(3),t.Q6J("formGroup",o.detailsForm),t.xp6(2),t.Q6J("value",o.subscriptionType.ExistingSubscription),t.xp6(1),t.Oqu(t.lcZ(8,13,"MODALS.ADD_SUBSCRIPTION_TO_GROUP.EXISTING_SUBSCRIPTION")),t.xp6(2),t.Q6J("value",o.subscriptionType.NewSubscription),t.xp6(1),t.hij(" ",t.lcZ(11,15,"MODALS.ADD_SUBSCRIPTION_TO_GROUP.NEW_SUBSCRIPTION"),""),t.xp6(3),t.Q6J("ngIf",o.isActiveSubscriptionsSelected()),t.xp6(1),t.Q6J("ngIf",o.submitted&&(null==o.f.activeSubscription||null==o.f.activeSubscription.errors?null:o.f.activeSubscription.errors.required)),t.xp6(1),t.Q6J("ngIf",!o.isActiveSubscriptionsSelected()),t.xp6(3),t.hij(" ",t.lcZ(19,17,"MAIN.SUBSCRIBE.SUBSCRIBE"),""),t.xp6(3),t.Oqu(t.lcZ(22,19,"ACTIONS.CLOSE")))},directives:[u.uh,u.xY,r._Y,r.JL,r.sg,C.VQ,r.JJ,r.u,C.U0,b.O5,Z.w9,Z.ir,Z.mR,U,S.TO,S.KE,r.Fj,G.Nt,r.Q7,u.H8,T.lW],pipes:[g.X$],styles:[""]}),i})();var _=(()=>{return(i=_||(_={}))[i.OnlyGroup=0]="OnlyGroup",i[i.Global=1]="Global",_;var i})();let X=(()=>{class i extends v.x{constructor(e,o,s,l,p,d){super(s,l),this.dialogRef=e,this.data=o,this.subscriptionsGroupService=p,this.subscriptionsService=d,this.unsubscriptionType=_}ngOnInit(){this.createForm()}createForm(){this.detailsForm=this.fb.group({unsubscriptionType:[_.OnlyGroup,r.kI.required]})}saveInternal(){this.detailsForm.getRawValue().unsubscriptionType===_.OnlyGroup?this.subscriptionsGroupService.deleteSubscriptionFromSubscriptionsGroup(this.data.groupName,this.data.subscriptionId).pipe((0,c.R)(this.unsubscribe)).subscribe(()=>{this.confirm()}):this.subscriptionsService.unsubscribe(this.data.subscriptionId).pipe((0,c.R)(this.unsubscribe)).subscribe(()=>{this.confirm()})}close(){this.dialogRef.close({isClosed:!0})}confirm(){var e,o;this.dialogRef.close({isClosed:!1,unsubscriptionType:null===(o=null===(e=this.f)||void 0===e?void 0:e.unsubscriptionType)||void 0===o?void 0:o.value})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(u.so),t.Y36(u.WI),t.Y36(f.gz),t.Y36(r.qu),t.Y36(m.c6),t.Y36(m.do))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-confirm-unsubscribe-from-group-dialog"]],features:[t.qOj],decls:19,vars:18,consts:[["mat-dialog-title",""],[1,"mat-typography","row"],[1,"mt-3",3,"formGroup"],["formControlName","unsubscriptionType","aria-label","Select an option"],["color","primary",3,"value"],["color","primary",1,"ms-md-3","ms-md-3","mt-md-0","mt-2","mb-3",3,"value"],["align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"mat-dialog-content",1),t.TgZ(4,"form",2),t.TgZ(5,"mat-radio-group",3),t.TgZ(6,"mat-radio-button",4),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"mat-radio-button",5),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"mat-dialog-actions",6),t.TgZ(13,"button",7),t.NdJ("click",function(){return o.save()}),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"button",8),t.NdJ("click",function(){return o.close()}),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,8,"MODALS.PLEASE_MAKE_A_CHOISE")),t.xp6(3),t.Q6J("formGroup",o.detailsForm),t.xp6(2),t.Q6J("value",o.unsubscriptionType.OnlyGroup),t.xp6(1),t.Oqu(t.lcZ(8,10,"MODALS.UNSUBSCRIBE_FROM_GROUP.ONLY_GROUP")),t.xp6(2),t.Q6J("value",o.unsubscriptionType.Global),t.xp6(1),t.Oqu(t.lcZ(11,12,"MODALS.UNSUBSCRIBE_FROM_GROUP.GLOBAL")),t.xp6(4),t.Oqu(t.lcZ(15,14,"ACTIONS.CONFIRM")),t.xp6(3),t.Oqu(t.lcZ(18,16,"ACTIONS.CLOSE")))},directives:[u.uh,u.xY,r._Y,r.JL,r.sg,C.VQ,r.JJ,r.u,C.U0,u.H8,T.lW],pipes:[g.X$],styles:[""]}),i})();const tt=function(i){return{fieldName:i}};function et(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.xi3(2,1,"VALIDATION.ERRORS.FIELD_REQUIRED",t.VKq(6,tt,t.lcZ(3,4,"MODALS.ADD_NEW_GROUP.GROUP_NAME")))," "))}let q=(()=>{class i extends v.x{constructor(e,o,s,l,p){super(o,s),this.dialogRef=e,this.data=l,this.subscriptionsGroupService=p}ngOnInit(){this.createForm(),this.isNew()||this.f.groupName.setValue(this.data.groupName)}saveInternal(){let e=this.detailsForm.getRawValue();this.isNew()?this.subscriptionsGroupService.addSubscriptionsGroup(e.groupName).pipe((0,c.R)(this.unsubscribe)).subscribe(()=>{this.close()}):this.subscriptionsGroupService.updateSubscriptionsGroup(this.data.groupId,e.groupName).pipe((0,c.R)(this.unsubscribe)).subscribe(()=>{this.close()})}close(){this.dialogRef.close(!1)}confirm(){this.dialogRef.close(!0)}createForm(){this.detailsForm=this.fb.group({groupName:[null,r.kI.required]})}isNew(){var e;return null==this.data||!(null===(e=this.data)||void 0===e?void 0:e.groupId)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(u.so),t.Y36(f.gz),t.Y36(r.qu),t.Y36(u.WI),t.Y36(m.c6))},i.\u0275cmp=t.Xpm({type:i,selectors:[["upsert-new-subscriptions-group-dialog"]],features:[t.qOj],decls:16,vars:16,consts:[["mat-dialog-title",""],[1,"mat-typography","row"],[3,"formGroup"],[1,"col-12","mt-3"],["formControlName","groupName","matInput","","required","",3,"placeholder"],[4,"ngIf"],["align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"mat-dialog-content",1),t.TgZ(4,"form",2),t.TgZ(5,"mat-form-field",3),t._UZ(6,"input",4),t.ALo(7,"translate"),t.YNc(8,et,4,8,"mat-error",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"mat-dialog-actions",6),t.TgZ(10,"button",7),t.NdJ("click",function(){return o.save()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"button",8),t.NdJ("click",function(){return o.close()}),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,8,"MODALS.ADD_NEW_GROUP.TITLE")),t.xp6(3),t.Q6J("formGroup",o.detailsForm),t.xp6(1),t.ekj("mat-form-field-invalid",o.submitted&&(null==o.f.groupName||null==o.f.groupName.errors?null:o.f.groupName.errors.required)),t.xp6(1),t.Q6J("placeholder",t.lcZ(7,10,"MODALS.ADD_NEW_GROUP.GROUP_NAME")),t.xp6(2),t.Q6J("ngIf",o.submitted&&(null==o.f.groupName||null==o.f.groupName.errors?null:o.f.groupName.errors.required)),t.xp6(3),t.Oqu(t.lcZ(12,12,"ACTIONS.CONFIRM")),t.xp6(3),t.Oqu(t.lcZ(15,14,"ACTIONS.CLOSE")))},directives:[u.uh,u.xY,r._Y,r.JL,r.sg,S.KE,r.Fj,G.Nt,r.JJ,r.u,r.Q7,b.O5,S.TO,u.H8,T.lW],pipes:[g.X$],styles:[""]}),i})();var it=a(2290),A=a(1125),I=a(6688),ot=a(5245);const nt=function(i){return{fieldName:i}};function st(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.xi3(2,1,"VALIDATION.ERRORS.FIELD_REQUIRED",t.VKq(6,nt,t.lcZ(3,4,"MAIN.SUBSCRIBE.CHANNEL_NAME")))," "))}function rt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw().viewGroupMessages()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"BUTTONS.VIEW_ALL"),""))}function at(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetDefaultSubscriptionGroup()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"BUTTONS.SET_THIS_GROUP_AS_DEFAULT"),""))}function lt(i,n){1&i&&(t.TgZ(0,"p",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"MAIN.SUBSCRIBE.NO_ACTIVE_SUBSCRIPTIONS")," "))}function ct(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-chip",21),t.NdJ("removed",function(){const l=t.CHM(e).$implicit;return t.oxw().unsubscribeChannel(l)}),t.TgZ(1,"span",22),t._uU(2),t.qZA(),t._UZ(3,"i",23),t.TgZ(4,"button",24),t.TgZ(5,"mat-icon"),t._uU(6,"cancel"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=n.$implicit;t.xp6(2),t.hij(" ",e.displayChannelName," "),t.xp6(1),t.Q6J("networkType",e.networkType)}}function pt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().viewGroupMessages(s.groupName)}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"BUTTONS.VIEW_THIS_GROUP"),""))}function ut(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().setSubscriptionGroupAsDefault(s)}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"BUTTONS.SET_THIS_GROUP_AS_DEFAULT"),""))}function mt(i,n){1&i&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"MAIN.SUBSCRIBE.NO_ACTIVE_SUBSCRIPTIONS"),""))}function dt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-chip",21),t.NdJ("removed",function(){const l=t.CHM(e).$implicit,p=t.oxw().$implicit;return t.oxw().unsubscribeGroupChannel(null==p?null:p.groupName,l)}),t.TgZ(1,"span",22),t._uU(2),t.qZA(),t._UZ(3,"i",23),t.TgZ(4,"button",24),t.TgZ(5,"mat-icon"),t._uU(6,"cancel"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=n.$implicit;t.xp6(2),t.hij(" ",e.displayChannelName," "),t.xp6(1),t.Q6J("networkType",e.networkType)}}function gt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-expansion-panel"),t.TgZ(1,"mat-expansion-panel-header"),t.TgZ(2,"mat-panel-title",25),t.TgZ(3,"span",26),t._uU(4),t.qZA(),t.TgZ(5,"i",27),t.NdJ("click",function(s){const p=t.CHM(e).$implicit,d=t.oxw();return s.stopPropagation(),s.preventDefault(),d.editGroup(p)}),t.qZA(),t.TgZ(6,"i",28),t.NdJ("click",function(s){const p=t.CHM(e).$implicit,d=t.oxw();return s.stopPropagation(),s.preventDefault(),d.deleteGroup(p)}),t.qZA(),t.qZA(),t.qZA(),t.YNc(7,pt,3,3,"button",29),t.YNc(8,ut,3,3,"button",29),t.TgZ(9,"button",30),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().addSubscriptionToGroup(l.groupName)}),t._UZ(10,"i",10),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",13),t.TgZ(14,"mat-chip-list"),t.YNc(15,mt,3,3,"p",6),t.YNc(16,dt,7,2,"mat-chip",15),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=n.$implicit,o=t.oxw();t.xp6(1),t.ekj("current-group",e.groupName===o.currentGroupName)("default-group",e.groupName===o.defaultGroupName),t.xp6(3),t.hij(" ",e.groupName," "),t.xp6(3),t.Q6J("ngIf",e.subscriptions&&(null==e||null==e.subscriptions?null:e.subscriptions.length)>0&&o.currentGroupName!=e.groupName),t.xp6(1),t.Q6J("ngIf",e.groupName!==o.defaultGroupName),t.xp6(3),t.hij(" ",t.lcZ(12,10,"BUTTONS.ADD_SUBSCRIPTION"),""),t.xp6(4),t.Q6J("ngIf",!(null!=e&&e.subscriptions)||0===(null==e||null==e.subscriptions?null:e.subscriptions.length)),t.xp6(1),t.Q6J("ngForOf",e.subscriptions)}}let bt=(()=>{class i extends v.x{constructor(e,o,s,l,p,d,qt,Lt){super(e,o),this.currentGroupService=s,this.subscriptionsGroupService=l,this.subscriptionsService=p,this.dialog=d,this.translate=qt,this.toastr=Lt,this.groupSelected=new t.vpe,this.defaultGroupName=null,this.networks=Object.values(m.td),this.userSubscriptions=[],this.groupSubscriptions=[],this.isMobileDevice=!1,this.currentGroupName=null}ngOnInit(){this.createForm(),this.loadSubscriptions(),this.isMobileDevice=this.isMobile(),this.currentGroupService.observeCurrentGroupChanged().pipe((0,c.R)(this.unsubscribe)).subscribe(e=>{this.currentGroupName=e})}createForm(){this.detailsForm=this.fb.group({networkType:["Telegram",r.kI.required],channelName:[null,r.kI.required]})}saveInternal(){let e=this.detailsForm.getRawValue();this.subscriptionsService.subscribe(e.networkType,e.channelName).pipe((0,c.R)(this.unsubscribe)).subscribe({error:()=>{this.f.channelName.reset(),this.resetSubmit()},complete:()=>{this.f.channelName.reset(),this.resetSubmit(),this.loadSubscriptions(),this.currentGroupName||this.viewGroupMessages()}})}unsubscribeChannel(e){this.dialog.open(x,{disableClose:!0,autoFocus:!1,minWidth:"25vw",data:{dialogTitle:this.translate.instant("MODALS.CONFIRM.TITLE"),confirmationText:this.translate.instant("MODALS.CONFIRM.UNSUBSCRIBE")}}).afterClosed().pipe((0,c.R)(this.unsubscribe)).subscribe(o=>{o&&this.subscriptionsService.unsubscribe(e.id).pipe((0,c.R)(this.unsubscribe)).subscribe(s=>{const l=this.subscriptionRelatedToCurrentGroup(e.id);(!this.currentGroupName||l)&&this.viewGroupMessages(this.currentGroupName),this.loadSubscriptions(),this.toastr.success(this.translate.instant("MESSAGES.UNSUBSCRIBE_SUCCESS"),this.translate.instant("MESSAGES.SUCCESS"))})})}subscriptionRelatedToCurrentGroup(e){const o=this.groupSubscriptions.find(s=>s.groupName===this.currentGroupName);return null!==o&&null!=o.subscriptions.find(s=>s.id==e)}viewGroupMessages(e=null){this.currentGroupName=e,this.groupSelected.emit(e)}addSubscriptionToGroup(e){this.dialog.open(K,{height:"auto",disableClose:!0,autoFocus:!1,minWidth:"25vw",data:{groupName:e}}).afterClosed().pipe((0,c.R)(this.unsubscribe)).subscribe(o=>{o.isClosed||(this.loadSubscriptions(),o.subscriptionType!==h.NewSubscription||this.currentGroupName?e===this.currentGroupName&&this.viewGroupMessages(e):this.viewGroupMessages(),this.toastr.success(this.translate.instant("MESSAGES.ADD_SUBSCRIPTION_TO_GROUP_SUCCESS"),this.translate.instant("MESSAGES.SUCCESS")))})}addNewGroup(){this.dialog.open(q,{disableClose:!0,autoFocus:!1,minWidth:"25vw"}).afterClosed().pipe((0,c.R)(this.unsubscribe)).subscribe(()=>{this.loadSubscriptions(),this.toastr.success(this.translate.instant("MESSAGES.GROUP_ADDED_SUCCESS"),this.translate.instant("MESSAGES.SUCCESS"))})}editGroup(e){this.dialog.open(q,{disableClose:!0,autoFocus:!1,minWidth:"25vw",data:{groupName:e.groupName,groupId:e.id}}).afterClosed().pipe((0,c.R)(this.unsubscribe)).subscribe(()=>{this.loadSubscriptions(),this.toastr.success(this.translate.instant("MESSAGES.EDIT_SUCCESS"),this.translate.instant("MESSAGES.SUCCESS"))})}refresh(){this.viewGroupMessages(this.currentGroupName)}unsubscribeGroupChannel(e,o){this.dialog.open(X,{disableClose:!0,autoFocus:!1,minWidth:"25vw",data:{groupName:e,subscriptionId:o.id}}).afterClosed().pipe((0,c.R)(this.unsubscribe)).subscribe(s=>{s.isClosed||(s.unsubscriptionType==_.Global?(!this.currentGroupName||e==this.currentGroupName)&&this.viewGroupMessages():e==this.currentGroupName&&this.viewGroupMessages(this.currentGroupName),this.loadSubscriptions(),this.toastr.success(this.translate.instant("MESSAGES.UNSUBSCRIBE_SUCCESS"),this.translate.instant("MESSAGES.SUCCESS")))})}loadSubscriptions(){this.subscriptionsService.subscriptions().pipe((0,c.R)(this.unsubscribe)).subscribe(e=>{this.userSubscriptions=null!=e?e:[]}),this.subscriptionsGroupService.groupSubscriptions().pipe((0,c.R)(this.unsubscribe)).subscribe(e=>{this.groupSubscriptions=null!=e?e:[]})}deleteGroup(e){this.dialog.open(x,{disableClose:!0,autoFocus:!1,minWidth:"25vw",data:{dialogTitle:this.translate.instant("MODALS.CONFIRM.TITLE"),confirmationText:this.translate.instant("MODALS.CONFIRM.DELETE_GROUP")}}).afterClosed().pipe((0,c.R)(this.unsubscribe)).subscribe(o=>{o&&this.subscriptionsGroupService.deleteSubscriptionGroup(e.id).pipe((0,c.R)(this.unsubscribe)).subscribe(()=>{this.currentGroupName==e.groupName&&(this.currentGroupName=null),this.loadSubscriptions(),this.toastr.success(this.translate.instant("MESSAGES.DELETE_SUCCESS"),this.translate.instant("MESSAGES.SUCCESS"))})})}resetDefaultSubscriptionGroup(){this.subscriptionsGroupService.resetDefaultSubscriptionGroup().pipe((0,c.R)(this.unsubscribe)).subscribe(()=>{this.defaultGroupName=null,this.toastr.success(this.translate.instant("MESSAGES.SET_DEFAULT_GROUP_SUCCESS"),this.translate.instant("MESSAGES.SUCCESS"))})}setSubscriptionGroupAsDefault(e){this.subscriptionsGroupService.setDefaultSubscriptionGroup(e.id).pipe((0,c.R)(this.unsubscribe)).subscribe(()=>{this.defaultGroupName=e.groupName,this.toastr.success(this.translate.instant("MESSAGES.SET_DEFAULT_GROUP_SUCCESS"),this.translate.instant("MESSAGES.SUCCESS"))})}isMobile(){let e=!1,o=window;return s=navigator.userAgent||navigator.vendor||o.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(s)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(s.substr(0,4)))&&(e=!0),e;var s}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.gz),t.Y36(r.qu),t.Y36(y),t.Y36(m.c6),t.Y36(m.do),t.Y36(u.uw),t.Y36(g.sK),t.Y36(it._W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-subscriptions"]],inputs:{defaultGroupName:"defaultGroupName"},outputs:{groupSelected:"groupSelected"},features:[t.qOj],decls:38,vars:34,consts:[[3,"expanded"],[1,"row"],[3,"formGroup"],["formControlName","networkType",1,"col-12",3,"items","clearable"],[1,"col-12"],["formControlName","channelName","matInput","","required","",3,"placeholder"],[4,"ngIf"],["mat-raised-button","","color","primary",1,"col-12","mt-2",3,"click"],[1,"row","m-0","mt-3"],["mat-stroked-button","","color","primary",1,"col-12","p-1",3,"click"],[1,"fab","fa-plus","mb-1","me-2","plus-button"],[1,"mt-2","\u0441ustom-group-list"],["class","col-12 p-1 mb-1 mt-1","mat-stroked-button","","color","primary",3,"click",4,"ngIf"],[1,"row","chip-list"],["class","mt-2",4,"ngIf"],["class","col-12",3,"removed",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",1,"col-12","mt-2",2,"background-color","#dcf2e4",3,"click"],[1,"fa-solid","fa-arrows-rotate"],["mat-stroked-button","","color","primary",1,"col-12","p-1","mb-1","mt-1",3,"click"],[1,"mt-2"],[1,"col-12",3,"removed"],[1,"truncate",2,"max-width","80%"],["networsItems","","aria-hidden","true",1,"ms-1",3,"networkType"],["matChipRemove","",1,"chip-close"],[2,"max-width","75%"],[1,"truncate"],[1,"fa","fa-pen","group-edit",3,"click"],[1,"fa","fa-close","group-delete",3,"click"],["class","col-12 p-1 mt-1 mb-1","mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-stroked-button","","color","primary",1,"col-12","mt-1","p-1","mb-1",3,"click"],["mat-stroked-button","","color","primary",1,"col-12","p-1","mt-1","mb-1",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-accordion"),t.TgZ(1,"mat-expansion-panel",0),t.TgZ(2,"mat-expansion-panel-header"),t.TgZ(3,"mat-panel-title"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.TgZ(6,"div",1),t.TgZ(7,"form",2),t._UZ(8,"ng-select",3),t.TgZ(9,"mat-form-field",4),t._UZ(10,"input",5),t.ALo(11,"translate"),t.YNc(12,st,4,8,"mat-error",6),t.qZA(),t.TgZ(13,"button",7),t.NdJ("click",function(){return o.save()}),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.TgZ(16,"div",8),t.TgZ(17,"button",9),t.NdJ("click",function(){return o.addNewGroup()}),t._UZ(18,"i",10),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"mat-accordion",11),t.TgZ(22,"mat-expansion-panel"),t.TgZ(23,"mat-expansion-panel-header"),t.TgZ(24,"mat-panel-title"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.YNc(27,rt,3,3,"button",12),t.YNc(28,at,3,3,"button",12),t.TgZ(29,"div",13),t.TgZ(30,"mat-chip-list"),t.YNc(31,lt,3,3,"p",14),t.YNc(32,ct,7,2,"mat-chip",15),t.qZA(),t.qZA(),t.qZA(),t.YNc(33,gt,17,12,"mat-expansion-panel",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"button",17),t.NdJ("click",function(){return o.refresh()}),t._UZ(35,"i",18),t._uU(36),t.ALo(37,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("expanded",!o.isMobileDevice),t.xp6(3),t.hij(" ",t.lcZ(5,22,"MAIN.SUBSCRIBE.SUBSCRIBE_TO_NEW_CHANNEL")," "),t.xp6(3),t.Q6J("formGroup",o.detailsForm),t.xp6(1),t.Q6J("items",o.networks)("clearable",!1),t.xp6(1),t.ekj("mat-form-field-invalid",o.submitted&&(null==o.f.channelName?null:o.f.channelName.errors)),t.xp6(1),t.Q6J("placeholder",t.lcZ(11,24,"MAIN.SUBSCRIBE.CHANNEL_NAME")),t.xp6(2),t.Q6J("ngIf",o.submitted&&(null==o.f.channelName||null==o.f.channelName.errors?null:o.f.channelName.errors.required)),t.xp6(2),t.hij(" ",t.lcZ(15,26,"MAIN.SUBSCRIBE.SUBSCRIBE"),""),t.xp6(5),t.hij(" ",t.lcZ(20,28,"BUTTONS.ADD_NEW_GROUP"),""),t.xp6(4),t.ekj("current-group",!o.currentGroupName)("default-group",!o.defaultGroupName),t.xp6(2),t.hij(" ",t.lcZ(26,30,"MAIN.SUBSCRIBE.ALL_SUBSCRIPTIONS")," "),t.xp6(2),t.Q6J("ngIf",o.userSubscriptions.length>0&&o.currentGroupName),t.xp6(1),t.Q6J("ngIf",o.defaultGroupName),t.xp6(3),t.Q6J("ngIf",0===o.userSubscriptions.length),t.xp6(1),t.Q6J("ngForOf",o.userSubscriptions),t.xp6(1),t.Q6J("ngForOf",o.groupSubscriptions),t.xp6(3),t.hij(" ",t.lcZ(37,32,"BUTTONS.REFRESH_MESSAGES"),""))},directives:[A.pp,A.ib,A.yz,A.yK,r._Y,r.JL,r.sg,Z.w9,r.JJ,r.u,S.KE,r.Fj,G.Nt,r.Q7,b.O5,S.TO,T.lW,I.qn,b.sg,I.HS,U,I.qH,ot.Hw],pipes:[g.X$],styles:['@charset "UTF-8";.chip-close[_ngcontent-%COMP%]{position:absolute;right:10px}.group-delete[_ngcontent-%COMP%]{position:absolute;right:50px;bottom:14px;font-size:15px}.group-edit[_ngcontent-%COMP%]{position:absolute;right:70px;bottom:15px;font-size:13px}.chip-list[_ngcontent-%COMP%]{min-height:5vh;max-height:40vh!important;overflow:auto}[_nghost-%COMP%]     .mat-chip-list-wrapper{margin:0}.plus-button[_ngcontent-%COMP%]{font-size:25px}.\\441ustom-group-list[_ngcontent-%COMP%]{padding:1px;max-height:55vh!important;overflow:auto}.default-group[_ngcontent-%COMP%]{background-color:#e9f09e!important}.current-group[_ngcontent-%COMP%]{background-color:#cee8ac!important}']}),i})();var N=a(9224);function ft(i,n){if(1&i&&(t.TgZ(0,"a",2),t.TgZ(1,"div",3),t.TgZ(2,"div"),t.TgZ(3,"div",4),t.TgZ(4,"div",5),t.TgZ(5,"div",6),t._UZ(6,"i",7),t.TgZ(7,"a",8),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=n.$implicit;t.Q6J("href",e,t.LSH),t.xp6(8),t.Oqu(e)}}let ht=(()=>{class i extends w.V{constructor(){super(),this.links=[],this.previews=[]}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-links-preview"]],inputs:{links:"links"},features:[t.qOj],decls:2,vars:1,consts:[[1,"col-8","ms-3"],["target","_blank",3,"href",4,"ngFor","ngForOf"],["target","_blank",3,"href"],[1,"mt-3","row","flex-column","link-preview"],[1,"col-12"],[1,"preview-text"],[1,"title","mt-2"],["aria-hidden","true",1,"fa","fa-link","me-2"],[1,""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,ft,9,2,"a",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.links))},directives:[b.sg],styles:["img[_ngcontent-%COMP%]{height:100%;width:100%}.link-preview[_ngcontent-%COMP%]{box-shadow:#63636333 0 2px 8px;min-height:6vh;background-color:#f0f8ff;border-radius:5px}.link-preview[_ngcontent-%COMP%]:hover{background-color:#81c9fc}.preview-text[_ngcontent-%COMP%]{overflow-wrap:break-word}"]}),i})();const _t=["videoElement"];let St=(()=>{class i{ngAfterViewInit(){if(Hls.isSupported()){const e=new Hls;e.loadSource(this.src),e.attachMedia(this.videoElement.nativeElement)}else this.videoElement.nativeElement.canPlayType("application/vnd.apple.mpegurl")&&(this.videoElement.nativeElement.src=this.src)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-m3u8-reader"]],viewQuery:function(e,o){if(1&e&&t.Gf(_t,5),2&e){let s;t.iGM(s=t.CRH())&&(o.videoElement=s.first)}},inputs:{src:"src"},decls:3,vars:0,consts:[[1,"row","m-0","p-0"],["controls","",1,"audio"],["videoElement",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"video",1,2),t.qZA())},styles:[""]}),i})();function Tt(i,n){1&i&&(t.TgZ(0,"p",7),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",8),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"MAIN.NO_MESSAGES")," "))}function vt(i,n){if(1&i&&t._UZ(0,"app-links-preview",17),2&i){const e=t.oxw().$implicit,o=t.oxw();t.Q6J("links",o.getTextLinks(e.text))}}function Ct(i,n){if(1&i&&t._UZ(0,"img",27),2&i){const e=t.oxw().$implicit;t.Q6J("src",e.contentUrl,t.LSH)}}function Zt(i,n){if(1&i&&t._UZ(0,"iframe",28),2&i){const e=t.oxw().$implicit;t.Q6J("src",e.contentUrl,t.uOi)}}function At(i,n){if(1&i&&(t.TgZ(0,"video",29),t._UZ(1,"source",30),t._uU(2," Sorry, your browser doesn't support embedded videos. "),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2).$implicit;t.Q6J("poster","Telegram"==o.networkType?"./assets/images/start-button.png":null,t.LSH)("preload","Telegram"==o.networkType?"none":"auto"),t.xp6(1),t.Q6J("src",e.contentUrl,t.LSH)}}function Nt(i,n){if(1&i&&t._UZ(0,"video",31),2&i){const e=t.oxw().$implicit;t.Q6J("src",e.contentUrl,t.LSH)}}function xt(i,n){if(1&i&&(t.TgZ(0,"a",32),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("href",e.contentUrl,t.LSH),t.xp6(1),t.hij(" ",e.name," ")}}function wt(i,n){if(1&i&&(t.TgZ(0,"audio",33),t._uU(1," Your browser does not support the "),t.TgZ(2,"code"),t._uU(3,"audio"),t.qZA(),t._uU(4," element. "),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2).$implicit;t.Q6J("preload","Telegram"===o.networkType?"none":"auto")("src",e.contentUrl,t.LSH)}}function Ut(i,n){if(1&i&&t._UZ(0,"app-m3u8-reader",34),2&i){const e=t.oxw().$implicit;t.Q6J("src",e.contentUrl)}}function Gt(i,n){if(1&i&&(t.TgZ(0,"div",19),t.YNc(1,Ct,1,1,"img",20),t.YNc(2,Zt,1,1,"iframe",21),t.YNc(3,At,3,3,"video",22),t.YNc(4,Nt,1,1,"video",23),t.YNc(5,xt,2,2,"a",24),t.YNc(6,wt,5,2,"audio",25),t.YNc(7,Ut,1,1,"app-m3u8-reader",26),t.qZA()),2&i){const e=n.$implicit,o=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf","Photo"===e.mediaType),t.xp6(1),t.Q6J("ngIf","Video"===e.mediaType&&"VK"==o.networkType),t.xp6(1),t.Q6J("ngIf","Video"===e.mediaType&&("Telegram"==o.networkType||"Twitter"==o.networkType)),t.xp6(1),t.Q6J("ngIf","GIF"===e.mediaType),t.xp6(1),t.Q6J("ngIf","Document"===e.mediaType),t.xp6(1),t.Q6J("ngIf","Audio"===e.mediaType&&"VK"!==o.networkType),t.xp6(1),t.Q6J("ngIf","Audio"===e.mediaType&&"VK"===o.networkType)}}function It(i,n){if(1&i&&(t.ynx(0),t.YNc(1,Gt,8,7,"div",18),t.BQk()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.networkMedia)}}function kt(i,n){if(1&i&&(t.TgZ(0,"mat-card",9),t.TgZ(1,"mat-card-header"),t.TgZ(2,"mat-card-title",10),t.TgZ(3,"a",11),t._uU(4),t.qZA(),t._UZ(5,"i",12),t.qZA(),t.qZA(),t.TgZ(6,"mat-card-content",13),t._UZ(7,"div",14),t.YNc(8,vt,1,1,"app-links-preview",15),t.YNc(9,It,2,1,"ng-container",16),t.qZA(),t.qZA()),2&i){const e=n.$implicit,o=t.oxw();let s;t.xp6(3),t.Q6J("href",e.originalContentLink,t.LSH),t.xp6(1),t.hij("",e.channelName," "),t.xp6(1),t.Q6J("networkType",e.networkType),t.xp6(2),t.Q6J("innerHTML",o.formatText(e.text),t.oJD),t.xp6(1),t.Q6J("ngIf",(null==(s=o.getTextLinks(e.text))?null:s.length)>0),t.xp6(1),t.Q6J("ngIf",(null==e.networkMedia?null:e.networkMedia.length)>0)}}const Ot=[{path:"",component:J,canActivate:[D.a],children:[{path:"",component:(()=>{class i extends w.V{constructor(e,o,s,l,p){super(),this.currentGroupService=e,this.subscriptionsGroupService=o,this.messagesService=s,this.sanitazer=l,this.loaderService=p,this.defaultGroupName=null,this.messages=[],this.offset=0,this.numberOfMessages=20,this.updateMessagesSubject=new O.x,this.isUpdatingNow=!1,this.stopReceiveMessages=!1,this.urlRegex=/(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|[-A-Z0-9+&@#\/%=~_|$?!:,.])*(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|[A-Z0-9+&@#\/%=~_|$])/gim,this.newLineRegex=/\n/g,this.currentGroupName=null}ngOnInit(){this.initMessageLoader(),this.subscriptionsGroupService.getUserDefaultSubscriptionGroup().pipe((0,c.R)(this.unsubscribe)).subscribe(e=>{e.isUserHasDefaultGroup?(this.defaultGroupName=e.groupName,this.updateMessages(e.groupName),this.currentGroupService.notifyCurrentGroupChanged(e.groupName)):this.updateMessages(this.currentGroupName)})}ngOnDestroy(){this.updateMessagesSubject.complete(),super.ngOnDestroy()}onScroll(e){e.scrollingElement.scrollHeight/1.7<=e.scrollingElement.scrollTop&&!this.isUpdatingNow&&(this.loaderService.hideRequest(),this.updateMessages(this.currentGroupName))}updateMessages(e=null){this.updateMessagesSubject.next(e)}formatText(e){return e.replace(this.newLineRegex,"<br />").replace(this.urlRegex,s=>`<a target="_blank" href="${s}">${s}</a>`)}getTextLinks(e){return e.match(this.urlRegex)}initMessageLoader(){this.updateMessagesSubject.asObservable().pipe((0,c.R)(this.unsubscribe),(0,Y.b)(e=>{this.currentGroupName=e}),(0,E.w)(e=>(this.isUpdatingNow=!0,this.stopReceiveMessages?Q.E:this.messagesService.getFiltered(this.numberOfMessages,this.offset,e).pipe((0,c.R)(this.unsubscribe),(0,B.K)(o=>{throw this.isUpdatingNow=!1,o}))))).subscribe({next:e=>{let o=e.filter(s=>!this.messages.some(l=>l.originalContentLink==s.originalContentLink));o.forEach(s=>{var l;null===(l=s.networkMedia)||void 0===l||l.forEach(p=>{s.networkType==m.td.VK&&p.mediaType==m.DD.Video&&(p.contentUrl=this.buildSafeUrlForIframe(p.contentUrl)),s.networkType==m.td.Telegram&&(p.contentUrl=this.buildContentLink(p.contentUrl))})}),0===o.length&&(this.stopReceiveMessages=!0),this.messages=[...this.messages,...o],this.isUpdatingNow=!1,this.offset+=this.numberOfMessages}})}groupSelected(e=null){this.offset=0,this.messages=[],this.stopReceiveMessages=!1,this.updateMessages(e)}buildContentLink(e){return e?e.includes("api/messages/")?`${e}&access_token=${localStorage.getItem("access_token")}`:e:""}buildSafeUrlForIframe(e){return this.sanitazer.bypassSecurityTrustResourceUrl(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y),t.Y36(m.c6),t.Y36(m.Kw),t.Y36(P.H7),t.Y36(j.D))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-main"]],hostBindings:function(e,o){1&e&&t.NdJ("scroll",function(l){return o.onScroll(l.target)},!1,t.Jf7)},features:[t.qOj],decls:7,vars:3,consts:[[1,"row"],[1,"col-md-4","col-sm-12","mt-3"],[3,"defaultGroupName","groupSelected"],[1,"col-md-8","col-sm-12","row","m-0",2,"height","80vh"],[1,"col-12","p-0"],["class","text-center mt-3","style","font-size: 25px;",4,"ngIf"],["class","mt-3 mat-elevation-z4",4,"ngFor","ngForOf"],[1,"text-center","mt-3",2,"font-size","25px"],[1,"fa-solid","fa-comments"],[1,"mt-3","mat-elevation-z4"],[1,"d-inline-flex"],["target","_blank",1,"d-block","max-width-40","truncate",3,"href"],["networsItems","","aria-hidden","true",1,"ms-2",3,"networkType"],[1,"card-content-wrapper"],[1,"col-12","mt-2","custom-font",3,"innerHTML"],["class","col-12",3,"links",4,"ngIf"],[4,"ngIf"],[1,"col-12",3,"links"],["class","fit-content row col-12",4,"ngFor","ngForOf"],[1,"fit-content","row","col-12"],["class","photo",3,"src",4,"ngIf"],["loading","lazy","class","video","controls","","webkitallowfullscreen","","mozallowfullscreen","","allowfullscreen","",3,"src",4,"ngIf"],["class","video","controls","controls",3,"poster","preload",4,"ngIf"],["autoplay","","loop","","muted","","playsinline","","controls","",3,"src",4,"ngIf"],["target","_blank","download","",3,"href",4,"ngIf"],["class","audio","controls","",3,"preload","src",4,"ngIf"],["class","m-0 p-0",3,"src",4,"ngIf"],[1,"photo",3,"src"],["loading","lazy","controls","","webkitallowfullscreen","","mozallowfullscreen","","allowfullscreen","",1,"video",3,"src"],["controls","controls",1,"video",3,"poster","preload"],["type","video/mp4",3,"src"],["autoplay","","loop","","muted","","playsinline","","controls","",3,"src"],["target","_blank","download","",3,"href"],["controls","",1,"audio",3,"preload","src"],[1,"m-0","p-0",3,"src"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"app-subscriptions",2),t.NdJ("groupSelected",function(l){return o.groupSelected(l)}),t.qZA(),t.qZA(),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.YNc(5,Tt,4,3,"p",5),t.YNc(6,kt,10,6,"mat-card",6),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("defaultGroupName",o.defaultGroupName),t.xp6(3),t.Q6J("ngIf",0===o.messages.length),t.xp6(1),t.Q6J("ngForOf",o.messages))},directives:[bt,b.O5,b.sg,N.a8,N.dk,N.n5,U,N.dn,ht,St],pipes:[g.X$],styles:["[_nghost-%COMP%]     mat-card>mat-card-header>div.mat-card-header-text{margin-left:0}.card-content-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;overflow-wrap:break-word}a[_ngcontent-%COMP%]{color:#0f7afc;border-bottom-color:#0f7afc33;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#cf0000;border-bottom-color:#d0400033;text-decoration:none}a[_ngcontent-%COMP%]:visited{color:purple;border-bottom-color:#80008033;text-decoration:none}.fit-content[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content}.video[_ngcontent-%COMP%]{max-width:70%;max-height:60%;min-height:50vh;min-width:35vw}.photo[_ngcontent-%COMP%]{max-width:90%;max-height:90%}.custom-font[_ngcontent-%COMP%]{font:message-box;font-family:Roboto}"]}),i})()}]}];let Et=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[f.Bz.forChild(Ot)],f.Bz]}),i})();var yt=a(7401);let Rt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[],imports:[[Et,b.ez,L.m,yt.PagesModule]]}),i})()}}]);